## 任务处理模型
1. 单线程阻塞 IO
2. 多线程非阻塞 IO 
3. 单线程非阻塞 IO 

**知识预备**
```
每秒查询率 QPS = 并发量 / 平均响应时间 
```
QPS越高,服务器的并发能力越强

### 单线程阻塞
一个一个处理,必须等待I/O读取完成,再进行下一个任务。

### 多线程非阻塞
通过使用线程切换,避免了CPU因等待IO操作的闲置，最大程度上利用了CPU资源。
但是线程间频繁的上下文切换(Context switch)增加了额外的开销,实际QPS并没达到理想值。其本质是数据的交换,它是很昂贵的,要尽可能避免。

### 单线程非阻塞
1. 收到请求, 注册本次IO读取的回调函数来处理数据并响应
2. 继续下一个请求,注册本次IO读取的回调函数
3. 请求处理结束,依次执行IO读取注册的回调函数
使用异步IO,线程不阻塞,也没有上下文切换带来的开销。



## 异步IO

**知识预备**
在计算机中,以CPU运算速度为基准,计时钟周期为1,其次分别是一级缓存、二级缓存、内存、硬盘和网络。显而易见,CPU运算时间远远小于常规IO读写的时间。
I/O类型及其花费的CPU时钟周期:
![image](../image/io_cost.png)

```
CPU时钟周期 = 1s/cpu主频
```
cpu在一个时钟周期仅完成一个最基本的动作;
完成一个基本操作的时间为机器周期,一般由几个时钟周期组成;
完成一条指令为指令周期,一般由几个机器周期组成,指令不同机器周期数也不同。




Ws：串行分量
Wp：并行分量

加速比 S = (Ws+Wp)/(Ws+Wp/P)
串行分量比例 f = Ws/(Ws+Wp)
P趋向于无穷时, S = 1/f
